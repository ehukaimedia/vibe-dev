# Quick CI/CD Fix Needed - Node vs Jest Issue

## Issue Found
The run-tests.js script is using Node's built-in test runner instead of Jest, causing exit code 9.

## Quick Fix Commands for Claude Code

```bash
cd /Users/ehukaimedia/Desktop/AI-Applications/Node/vibe-dev

# Option 1: Update run-tests.js to use Jest
cat > scripts/run-tests-jest.js << 'EOF'
#!/usr/bin/env node
import { spawn } from 'child_process';

const args = ['jest'];

// Add CI-specific flags
if (process.env.CI) {
  args.push(
    '--forceExit',
    '--detectOpenHandles',
    '--watchAll=false',
    '--maxWorkers=2',
    '--testTimeout=30000',
    '--coverage=false'
  );
}

// Pass through any additional arguments
args.push(...process.argv.slice(2));

const child = spawn('npx', args, { 
  stdio: 'inherit',
  env: process.env
});

child.on('close', (code) => {
  process.exit(code);
});
EOF

chmod +x scripts/run-tests-jest.js

# Option 2: Simplify test:ci to use Jest directly
npm pkg set scripts.test:ci="npm run build && CI=true jest --forceExit --detectOpenHandles --watchAll=false --maxWorkers=2 --testTimeout=30000 --coverage=false"

# Test locally
CI=true npm run test:ci

# Commit and push the fix
git add -A
git commit -m "fix: use Jest instead of Node test runner for CI tests"
git push origin main
```

The tests completed in 14 seconds before failing - this proves the hanging is fixed! Just need to use Jest properly.
